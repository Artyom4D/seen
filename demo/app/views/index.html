<html>
<head>
  <title>seen.js</title>
  <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'/>
  <link href='lib/demo-theme.css' rel='stylesheet' type='text/css'/>
  <script src="dist/seen.js"></script>
  <script src="lib/coffee-script.min.js"></script>
</head>
<body>
  <div class="page">
    <h1>seen.js</h1>

    <canvas id="seen-canvas" width="900" height="150"></canvas>

    <h2>Download</h2>

    <a class="download-link">
      <div class="download-title">Download seen.min.js v0.1</div>
      <div class="download-subtitle">no dependencies</div>
    </a>

    <h2>Demos</h2>

    <ul class="demo-list">
      {% for demo in demos %}
        <a href="{{demo.view}}"><li>{{demo.title}}</li></a>
      {% endfor %}
    </ul>

    <h2> Source </h2>
    You can read the Docco-generated <a href="/docs/seen.html">annotated source</a>.
    The full source is available on <a href="//github.com/themadcreator">github</a>.

    <h2> API </h2>
    {points, painter, materials} -> surface -> shape 
    {shapes, models, lights} -> model
    {viewport, cameraMatrix} -> camera
    {camera, model} -> scene
    scene -> context

    Render Context (SVG vs. Canvas)

    Render Loop

    Transformables

    Animation

    Interaction

  </div>
  <div class="footer">seen.js was created by <a href="//github.com/themadcreator">themadcreator@github</a></div>

  <script type="text/coffeescript" src="/lib/simplex-noise.coffee"></script>
  <script type="text/coffeescript">
    width               = 900
    height              = 150
    equilateralAltitude = Math.sqrt(3.0) / 2.0
    triangleScale       = 70
    patch_width         = width * 2.5
    patch_height        = height * 3.0

    # Create patch of triangles that spans the view
    shape = seen.Shapes.patch(
      patch_width / triangleScale / equilateralAltitude
      patch_height / triangleScale
    )
    .scale(triangleScale)
    .translate(-patch_width/2, -patch_height/2 + 50, -100)
    .rotx(-0.3)
    seen.Colors.randomSurfaces2(shape)

    # Create scene and render context
    scene = new seen.Scene
      fractionalPoints : true
      model            : seen.Models.default().add(shape)
      camera           : new seen.Camera
        viewport : seen.Viewports.center(width, height)

    context = seen.Contexts.createWithScene('seen-canvas', scene, width, height).render()

    # Apply animated 3D simplex noise to patch vertices
    t = 0
    noiser = new Simplex3D(Math.random())
    context.animate()
      .onBefore(->
        for surf in shape.surfaces
          for p in surf.points
            p.z = 2*noiser.noise(p.x/8, p.y/8, t)
          # Since we're modifying the point directly, we need to mark the surface dirty
          # to make sure the cache doesn't ignore the change
          surf.dirty = true
        t += 0.005
      )
      .start()
  </script>

</body>
</html>
